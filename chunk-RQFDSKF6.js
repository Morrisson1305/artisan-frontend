import{a as j,b as z,d as U,e as G,g as H,i as Z,l as q,s as J,v as Q}from"./chunk-QCKMTWOB.js";import{a as k,d as K,e as A,f as L,g as R}from"./chunk-QMK46LHX.js";import{Ab as E,Ib as D,Kb as M,Ma as h,Nb as B,Ob as P,Ra as y,T as V,X as b,Ya as v,Z as N,Za as O,cb as _,ia as c,ja as u,k as d,kb as p,nb as w,oa as F,pb as g,qb as C,sb as T,tb as S,ub as x,wb as I,xb as l}from"./chunk-HI7HT6SX.js";var W=o=>({"error-input":o});function X(o,r){if(o&1&&(g(0,"span"),D(1),C()),o&2){let t=l(3);h(),M(" ",t.config.separator," ")}}function Y(o,r){if(o&1){let t=x();T(0),g(1,"input",5,0),I("paste",function(e){c(t);let i=l(2);return u(i.handlePaste(e))})("keyup",function(e){let i=c(t).index,s=l(2);return u(s.onKeyUp(e,i))})("input",function(e){let i=c(t).index,s=l(2);return u(s.onInput(e,i))})("keydown",function(e){let i=c(t).index,s=l(2);return u(s.onKeyDown(e,i))}),C(),_(3,X,2,1,"span",6),S()}if(o&2){let t=r.$implicit,n=r.index,e=r.last,i=l(2);h(),w("otp-input ",i.config.inputClass,""),p("pattern",i.config.allowNumbersOnly?"\\d*":"")("type",i.inputType)("placeholder",(i.config==null?null:i.config.placeholder)||"")("ngStyle",i.config.inputStyles)("formControl",i.otpForm.controls[t])("id",i.getBoxId(n))("ngClass",P(11,W,(i.config==null?null:i.config.showError)&&(i.formControl==null?null:i.formControl.invalid)&&((i.formControl==null?null:i.formControl.dirty)||(i.formControl==null?null:i.formControl.touched)))),h(2),p("ngIf",i.config.separator&&!e)}}function $(o,r){if(o&1){let t=x();g(0,"div",2),I("focusin",function(){c(t);let e=l();return u(e.onFocusIn())})("focusout",function(){c(t);let e=l();return u(e.onFocusOut())}),g(1,"div",3),_(2,Y,4,13,"ng-container",4),C()()}if(o&2){let t=l();w("ng-otp-input-wrapper wrapper ",t.config.containerClass,""),E("id","c_",t.componentKey,""),p("ngStyle",t.config.containerStyles),h(2),p("ngForOf",t.controlKeys)}}var a=class{static ifTab(r){return this.ifKey(r,"Tab")}static ifDelete(r){return this.ifKey(r,"Delete;Del")}static ifBackspace(r){return this.ifKey(r,"Backspace")}static ifRightArrow(r){return this.ifKey(r,"ArrowRight;Right")}static ifLeftArrow(r){return this.ifKey(r,"ArrowLeft;Left")}static ifSpacebar(r){return this.ifKey(r,"Spacebar; ")}static ifKey(r,t){return t.split(";").some(e=>e===r.key)}},m=class{static keys(r){return r?Object.keys(r):[]}},tt=(()=>{class o{set disabled(t){this.setDisabledState(t)}get inputType(){return this.config?.isPasswordInput?"password":this.config?.allowNumbersOnly?"tel":"text"}get controlKeys(){return m.keys(this.otpForm?.controls)}get formControl(){return this.formCtrl??this.inj?.get(U)}constructor(t,n){this.document=t,this.inj=n,this.config={length:4},this.onBlur=new d,this.onInputChange=new d,this.inputControls=new Array(this.config.length),this.componentKey=Math.random().toString(36).substring(2)+new Date().getTime().toString(36),this.destroy$=new d,this.activeFocusCount=0,this.onChange=()=>{},this.onTouched=()=>{},this._isDisabled=!1}ngOnInit(){this.otpForm=new H({});for(let t=0;t<this.config.length;t++)this.otpForm.addControl(this.getControlName(t),new Z);this.otpForm.valueChanges.pipe(V(this.destroy$)).subscribe(t=>{m.keys(this.otpForm.controls).forEach(n=>{var e=this.otpForm.controls[n].value;e&&e.length>1&&(e.length>=this.config.length?this.setValue(e):this.rebuildValue())})})}setDisabledState(t){this._isDisabled=t,this.otpForm&&(t?this.otpForm.disable({emitEvent:!1}):this.otpForm.enable({emitEvent:!1}))}writeValue(t){this.currentVal=this.hasVal(t)?t:null,this.setValue(this.currentVal)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}onFocusIn(){this.onTouched(),this.activeFocusCount++}onFocusOut(){setTimeout(()=>{this.activeFocusCount--,this.activeFocusCount===0&&(this.onTouched(),this.onBlur.next())},0)}ngAfterViewInit(){if(!this.config.disableAutoFocus){let t=this.document.getElementById(`c_${this.componentKey}`);if(t){let n=t.getElementsByClassName("otp-input")[0];n&&n.focus&&n.focus()}}}getControlName(t){return`ctrl_${t}`}onKeyDown(t,n){let e=this.getBoxId(n-1),i=this.getBoxId(n);if(a.ifKey(t,"Enter")){let f=this.document.getElementById(i)?.closest("form");if(f){t.preventDefault(),f.dispatchEvent(new Event("submit"));return}}if(a.ifSpacebar(t))return t.preventDefault(),!1;if(a.ifBackspace(t)){t.target.value?this.clearInput(i,n):(this.clearInput(e,n-1),this.setSelected(e)),this.rebuildValue();return}if(a.ifDelete(t)){t.target.value?this.clearInput(i,n):(this.clearInput(e,n-1),this.setSelected(e)),this.rebuildValue();return}}hasVal(t){return t!=null&&t!=null&&(!t?.trim||t.trim()!="")}onInput(t,n){let e=this.hasVal(this.currentVal)?`${this.currentVal}${t.target.value}`:t.target.value;if(this.config.allowNumbersOnly&&!this.validateNumber(e)){t.target.value=null,t.stopPropagation(),t.preventDefault(),this.clearInput(null,n);return}if(this.ifValidKeyCode(null,t.target.value)){let i=this.getBoxId(n+1);this.setSelected(i),this.rebuildValue()}else{t.target.value=null;let i=this.getControlName(n);this.otpForm.controls[i]?.setValue(null),this.rebuildValue()}}onKeyUp(t,n){a.ifTab(t)&&(n-=1);let e=this.getBoxId(n+1),i=this.getBoxId(n-1);if(a.ifRightArrow(t)){t.preventDefault(),this.setSelected(e);return}if(a.ifLeftArrow(t)){t.preventDefault(),this.setSelected(i);return}}validateNumber(t){return t&&/^[0-9]+$/.test(t)}getBoxId(t){return`otp_${t}_${this.componentKey}`}clearInput(t,n){let e=this.getControlName(n);if(this.otpForm.controls[e]?.setValue(null),t){let i=this.document.getElementById(t);i&&i instanceof HTMLInputElement&&(i.value=null)}}setSelected(t){this.focusTo(t);let n=this.document.getElementById(t);n&&n.setSelectionRange&&setTimeout(()=>{n.setSelectionRange(0,1)},0)}ifValidKeyCode(t,n){let e=n??t.key;return this.config?.allowNumbersOnly?this.validateNumber(e):/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||/^[a-zA-Z0-9%*_\-@#$!]$/.test(e)&&e.length==1}focusTo(t){let n=this.document.getElementById(t);n&&n.focus()}setValue(t){if(!(this.config.allowNumbersOnly&&isNaN(t))){if(this.otpForm?.reset(),!this.hasVal(t)){this.rebuildValue();return}t=t.toString().replace(/\s/g,""),Array.from(t).forEach((n,e)=>{this.otpForm.get(this.getControlName(e))&&this.otpForm.get(this.getControlName(e)).setValue(n)}),this.config.disableAutoFocus||setTimeout(()=>{let n=this.document.getElementById(`c_${this.componentKey}`);var e=t.length<this.config.length?t.length:this.config.length-1;let i=n.getElementsByClassName("otp-input")[e];i&&i.focus&&setTimeout(()=>{i.focus()},1)},0),this.rebuildValue()}}rebuildValue(){let t=null;m.keys(this.otpForm.controls).forEach(n=>{let e=this.otpForm.controls[n].value;if(e){let i=e.length>1,s=!this.config.allowNumbersOnly&&this.config.letterCase&&(this.config.letterCase.toLocaleLowerCase()=="upper"||this.config.letterCase.toLocaleLowerCase()=="lower");e=e[0];let f=s?this.config.letterCase.toLocaleLowerCase()=="upper"?e.toUpperCase():e.toLowerCase():e;s&&f==e?s=!1:e=f,t==null?t=e:t+=e,(i||s)&&this.otpForm.controls[n].setValue(e)}}),this.currentVal!=t&&(this.currentVal=t,this.onChange(t),this.formCtrl?.setValue&&this.formCtrl.setValue(t),this.onInputChange.next(t))}handlePaste(t){let n=t.clipboardData||window.clipboardData;if(n)var e=n.getData("Text");t.stopPropagation(),t.preventDefault(),!(!e||this.config.allowNumbersOnly&&!this.validateNumber(e))&&this.setValue(e)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(n){return new(n||o)(y(k),y(F))}}static{this.\u0275cmp=v({type:o,selectors:[["ng-otp-input"],["ngx-otp-input"]],inputs:{config:"config",formCtrl:"formCtrl",disabled:"disabled"},outputs:{onBlur:"onBlur",onInputChange:"onInputChange"},features:[B([{provide:j,useExisting:b(()=>o),multi:!0}])],decls:1,vars:1,consts:[["inp",""],["tabindex","0",3,"class","id","ngStyle","focusin","focusout",4,"ngIf"],["tabindex","0",3,"focusin","focusout","id","ngStyle"],[1,"n-o-c"],[4,"ngFor","ngForOf"],["autocomplete","one-time-code",3,"paste","keyup","input","keydown","pattern","type","placeholder","ngStyle","formControl","id","ngClass"],[4,"ngIf"]],template:function(n,e){n&1&&_(0,$,3,7,"div",1),n&2&&p("ngIf",e.otpForm==null?null:e.otpForm.controls)},dependencies:[Q,z,G,J,q,L,A,R,K],styles:[".otp-input[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:4px;border:solid 1px #c5c5c5;text-align:center;font-size:32px}.ng-otp-input-wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]{margin:0 .51rem}.ng-otp-input-wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]:first-child{margin-left:0}.ng-otp-input-wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]:last-child{margin-right:0}.n-o-c[_ngcontent-%COMP%]{display:flex;align-items:center}.error-input[_ngcontent-%COMP%]{border-color:red}@media screen and (max-width: 767px){.otp-input[_ngcontent-%COMP%]{width:40px;font-size:24px;height:40px}}@media screen and (max-width: 420px){.otp-input[_ngcontent-%COMP%]{width:30px;font-size:18px;height:30px}}"]})}}return o})(),ht=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=O({type:o})}static{this.\u0275inj=N({imports:[tt]})}}return o})();export{tt as a,ht as b};
