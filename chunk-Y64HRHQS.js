import{L as k,M as L,b as v,c as p,e as h,f as w,i as S,k as x,l as y,p as F,r as E,t as I}from"./chunk-AAGMSOAC.js";import"./chunk-X6CIV5L2.js";import{f as b}from"./chunk-KO2BALJS.js";import{Da as a,Ia as g,Oa as C,Rb as M,Sa as d,Tb as O,Za as c,cb as n,db as t,eb as u,jb as f,kb as P,sb as o,ub as _}from"./chunk-DWD5OEKV.js";function T(r,m){r&1&&(n(0,"small"),o(1,"Email is required."),t())}function q(r,m){r&1&&(n(0,"small"),o(1,"Invalid email format."),t())}function z(r,m){if(r&1&&(n(0,"div",15),d(1,T,2,0,"small",16)(2,q,2,0,"small",16),t()),r&2){let i,e,l=P();a(),c("ngIf",(i=l.loginForm.get("email"))==null||i.errors==null?null:i.errors.required),a(),c("ngIf",(e=l.loginForm.get("email"))==null||e.errors==null?null:e.errors.email)}}function D(r,m){r&1&&(n(0,"div",15)(1,"small"),o(2,"Password is required."),t()())}var N=class r{constructor(m,i,e,l){this.fb=m;this.authService=i;this.toast=e;this.router=l;this.loginForm=this.fb.group({phone:["",[p.required,p.pattern(/^[0-9]{10,15}$/)]],password:["",[p.required]]})}loginForm;loginPending=!1;showPassword=!1;togglePasswordVisibility(){this.showPassword=!this.showPassword}handleSubmit(){if(this.loginForm.invalid)return;this.loginPending=!0;let{phone:m,password:i}=this.loginForm.value;this.authService.login({phone:m,password:i}).subscribe({next:e=>{this.toast.success("Welcome back! You have been successfully logged in."),e.user?.isArtisan?this.router.navigate(["/artisan-dashboard"]):this.router.navigate(["/user-dashboard"])},error:e=>{this.toast.error("Login failed or Invalid credentials")},complete:()=>{this.loginPending=!1}})}static \u0275fac=function(i){return new(i||r)(g(E),g(k),g(L),g(b))};static \u0275cmp=C({type:r,selectors:[["app-login"]],decls:27,vars:7,consts:[[1,"login-container"],[1,"login-card"],[1,"subtitle"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["id","email","type","email","formControlName","email","placeholder","Enter your email","required",""],["class","error",4,"ngIf"],["for","password"],[1,"password-wrapper"],["id","password","formControlName","password","placeholder","Enter your password","required","",3,"type"],["type","button",1,"toggle-password",3,"click"],["type","submit",3,"disabled"],[1,"footer-text"],["routerLink","/register"],[1,"error"],[4,"ngIf"]],template:function(i,e){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"h2"),o(3,"Sign in"),t(),n(4,"p",2),o(5,"Enter your credentials to access your account"),t(),n(6,"form",3),f("ngSubmit",function(){return e.handleSubmit()}),n(7,"div",4)(8,"label",5),o(9,"Email"),t(),u(10,"input",6),d(11,z,3,2,"div",7),t(),n(12,"div",4)(13,"label",8),o(14,"Password"),t(),n(15,"div",9),u(16,"input",10),n(17,"button",11),f("click",function(){return e.showPassword=!e.showPassword}),o(18),t()(),d(19,D,3,0,"div",7),t(),n(20,"button",12),o(21),t()(),n(22,"div",13)(23,"span"),o(24,"Don't have an account? "),t(),n(25,"a",14),o(26,"Sign up"),t()()()()),i&2){let l,s;a(6),c("formGroup",e.loginForm),a(5),c("ngIf",((l=e.loginForm.get("email"))==null?null:l.touched)&&((l=e.loginForm.get("email"))==null?null:l.invalid)),a(5),c("type",e.showPassword?"text":"password"),a(2),_(" ",e.showPassword?"Hide":"Show"," "),a(),c("ngIf",((s=e.loginForm.get("password"))==null?null:s.touched)&&((s=e.loginForm.get("password"))==null?null:s.invalid)),a(),c("disabled",e.loginPending||e.loginForm.invalid),a(),_(" ",e.loginPending?"Signing in...":"Sign in"," ")}},dependencies:[O,M,I,S,v,h,w,F,x,y],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:4rem 1rem;background-color:#f9fafb;min-height:100vh}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;background-color:#fff;padding:2rem;border-radius:.5rem;box-shadow:0 2px 8px #0000001a}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:1.75rem;font-weight:600;margin-bottom:.5rem}.login-card[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{text-align:center;font-size:.95rem;color:#6b7280;margin-bottom:1.5rem}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;color:#374151;margin-bottom:.25rem}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #d1d5db;border-radius:.375rem;font-size:.95rem;outline:none;transition:border-color .2s}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#3b82f6}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-wrapper[_ngcontent-%COMP%]{position:relative}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-right:4rem}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-wrapper[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]{position:absolute;top:50%;right:.75rem;transform:translateY(-50%);background:none;border:none;color:#2563eb;font-size:.85rem;cursor:pointer}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{margin-top:.25rem}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#dc2626;font-size:.8rem}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#2563eb;color:#fff;padding:.5rem;border:none;border-radius:.375rem;font-weight:600;cursor:pointer;transition:background-color .2s}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#1d4ed8}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.login-card[_ngcontent-%COMP%]   .footer-text[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;font-size:.875rem;color:#6b7280}.login-card[_ngcontent-%COMP%]   .footer-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#2563eb;text-decoration:none;font-weight:500}.login-card[_ngcontent-%COMP%]   .footer-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#1d4ed8}"]})};export{N as LoginComponent};
