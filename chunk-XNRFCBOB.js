import{a as I,b as q}from"./chunk-RFWIYMET.js";import{a as j,b as i,c as v,d as h,e as x,f as y,g as S,h as E,i as w,j as N,k as B,m as J,o as D,t as F,u as k,w as T,y as A}from"./chunk-S4F7XZOH.js";import{p as O}from"./chunk-CPVSVIW5.js";import{D as M,Ga as g,La as m,Ra as _,a as b,b as f,cb as p,hb as e,ib as t,jb as c,o as C,ob as d,ta as P,yb as o}from"./chunk-QQISNQ6W.js";var G=class u{constructor(a,r,n,l,s){this.fb=a;this.jobService=r;this.toast=n;this.dialog=l;this.authService=s;this.form=this.fb.group({title:["",i.required],description:["",i.required],category:["",i.required],location:["",i.required],minBudget:[null,[i.required,i.min(1)]],maxBudget:[null,[i.required,i.min(1)]],priority:["low",i.required]})}form;submitting=P(!1);onSubmit(){if(this.form.invalid){this.toast.warning("Please fill in all required fields");return}let a=this.authService.getUser();if(!a){this.toast.error("User not authenticated");return}let r=f(b({},this.form.value),{userId:a._id});this.submitting.set(!0),this.jobService.createJob(r).pipe(M(n=>(this.submitting.set(!1),this.toast.error(n?.error?.message||"Failed to create job"),C(null)))).subscribe(n=>{if(this.submitting.set(!1),n?.job){this.toast.success("Job created successfully. Please verify with OTP.");let s=this.dialog.open(q,{disableClose:!0,width:"700px",data:{phone:a.phone,type:"job",jobId:n.job._id}}).componentInstance;s.verified.subscribe(()=>{this.toast.success("Your job has been verified.")}),s.showToast.subscribe(z=>{this.toast.show(z)})}})}onCancel(){this.form.reset(),this.toast.warning("Job posting cancelled")}static \u0275fac=function(r){return new(r||u)(m(J),m(I),m(T),m(F),m(A))};static \u0275cmp=_({type:u,selectors:[["app-post-job"]],decls:44,vars:2,consts:[[1,"post-job-container"],[1,"job-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","title"],["id","title","type","text","formControlName","title","placeholder","Enter job title"],["for","description"],["id","description","formControlName","description","placeholder","Describe the job"],["for","category"],["id","category","type","text","formControlName","category","placeholder","e.g. Plumbing, Electrical"],["for","location"],["id","location","type","text","formControlName","location","placeholder","City or Landmark"],[1,"budget-group"],["for","minBudget"],["id","minBudget","type","number","formControlName","minBudget"],["for","maxBudget"],["id","maxBudget","type","number","formControlName","maxBudget"],["for","priority"],["id","priority","formControlName","priority"],["value","low"],["value","medium"],["value","high"],[1,"form-actions"],["type","button",3,"click"],["type","submit",3,"disabled"]],template:function(r,n){r&1&&(e(0,"div",0)(1,"h2"),o(2,"Post New Job"),t(),e(3,"form",1),d("ngSubmit",function(){return n.onSubmit()}),e(4,"div",2)(5,"label",3),o(6,"Job Title"),t(),c(7,"input",4),t(),e(8,"div",2)(9,"label",5),o(10,"Job Description"),t(),c(11,"textarea",6),t(),e(12,"div",2)(13,"label",7),o(14,"Category"),t(),c(15,"input",8),t(),e(16,"div",2)(17,"label",9),o(18,"Location"),t(),c(19,"input",10),t(),e(20,"div",11)(21,"div",2)(22,"label",12),o(23,"Min Budget (\u20B5)"),t(),c(24,"input",13),t(),e(25,"div",2)(26,"label",14),o(27,"Max Budget (\u20B5)"),t(),c(28,"input",15),t()(),e(29,"div",2)(30,"label",16),o(31,"Priority"),t(),e(32,"select",17)(33,"option",18),o(34,"Low"),t(),e(35,"option",19),o(36,"Medium"),t(),e(37,"option",20),o(38,"High"),t()()(),e(39,"div",21)(40,"button",22),d("click",function(){return n.onCancel()}),o(41,"Cancel"),t(),e(42,"button",23),o(43,"Submit"),t()()()()),r&2&&(g(3),p("formGroup",n.form),g(39),p("disabled",n.form.invalid))},dependencies:[O,D,x,N,B,j,y,w,v,h,S,E,k],styles:[".post-job-container[_ngcontent-%COMP%]{max-width:720px;margin:2rem auto;padding:2rem;background:#fff;border-radius:12px;box-shadow:0 4px 20px #00000014}.post-job-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:600;margin-bottom:1.5rem;text-align:center;color:#333}.post-job-container[_ngcontent-%COMP%]   .job-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.post-job-container[_ngcontent-%COMP%]   .job-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.post-job-container[_ngcontent-%COMP%]   .job-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#444}.post-job-container[_ngcontent-%COMP%]   .job-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .post-job-container[_ngcontent-%COMP%]   .job-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .post-job-container[_ngcontent-%COMP%]   .job-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:1rem;border:1px solid #ccc;border-radius:8px;transition:border-color .2s ease-in-out}.post-job-container[_ngcontent-%COMP%]   .job-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .post-job-container[_ngcontent-%COMP%]   .job-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .post-job-container[_ngcontent-%COMP%]   .job-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#4caf50;outline:none}.post-job-container[_ngcontent-%COMP%]   .job-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:100px;resize:vertical}.post-job-container[_ngcontent-%COMP%]   .job-form[_ngcontent-%COMP%]   .budget-group[_ngcontent-%COMP%]{display:flex;gap:1rem}.post-job-container[_ngcontent-%COMP%]   .job-form[_ngcontent-%COMP%]   .budget-group[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}@media (max-width: 600px){.post-job-container[_ngcontent-%COMP%]   .job-form[_ngcontent-%COMP%]   .budget-group[_ngcontent-%COMP%]{flex-direction:column}}.post-job-container[_ngcontent-%COMP%]   .job-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:1rem}.post-job-container[_ngcontent-%COMP%]   .job-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem 1.5rem;font-size:1rem;font-weight:500;border:none;border-radius:6px;text-transform:capitalize;cursor:pointer}.post-job-container[_ngcontent-%COMP%]   .job-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{background-color:#e0e0e0;color:#333}.post-job-container[_ngcontent-%COMP%]   .job-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]:hover{background-color:#d5d5d5}.post-job-container[_ngcontent-%COMP%]   .job-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.post-job-container[_ngcontent-%COMP%]   .job-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#43a047}.post-job-container[_ngcontent-%COMP%]   .job-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#a5d6a7;cursor:not-allowed}"]})};export{G as PostJobComponent};
