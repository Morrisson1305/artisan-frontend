import{a as R}from"./chunk-KCADBFAN.js";import{a as b,b as M}from"./chunk-5VSC257S.js";import{j as h,k as l,l as g,m as C,n as v,r as y}from"./chunk-INCWKMBU.js";import{A as m,N as d,Oa as f,Y as i,eb as u,m as s}from"./chunk-PPTO45QW.js";var r=class e{title="craft-connect";static \u0275fac=function(t){return new(t||e)};static \u0275cmp=f({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(t,c){t&1&&u(0,"router-outlet")},dependencies:[v],encapsulation:2})};var H=[{path:"",pathMatch:"full",loadComponent:()=>import("./chunk-CDPZSNIS.js").then(e=>e.HomeComponent)},{path:"become-artisan",loadComponent:()=>import("./chunk-MCLQD46F.js").then(e=>e.RegisterComponent)},{path:"login",loadComponent:()=>import("./chunk-Z6YVJ4TF.js").then(e=>e.LoginComponent)},{path:"about",loadComponent:()=>import("./chunk-SXHGNLVC.js").then(e=>e.AboutComponent)},{path:"user-dashboard",component:R,children:[{path:"",loadComponent:()=>import("./chunk-WMCQGLMQ.js").then(e=>e.UserDashboardComponent)},{path:"profile",loadComponent:()=>import("./chunk-NXUGEQSG.js").then(e=>e.ProfileComponent)}]},{path:"**",redirectTo:""}];var S=(e,n)=>{let t=i(M),c=i(l),p=t.getAccessToken(),T=b.baseUrl,k=e;if(p&&!t.isTokenExpired(p)){let a=e.clone({setHeaders:{Authorization:`Bearer ${p}`}})}return n(k).pipe(m(a=>{if(a.status!==401||!t.getRefreshToken())return s(()=>a);let A=t.getRefreshToken();return c.post(`${T}/auth/refresh-token`,{refreshToken:A}).pipe(d(o=>{t.setTokens(o.accessToken,o.refreshToken);let N=e.clone({setHeaders:{Authorization:`Bearer ${o.accessToken}`}});return n(N)}),m(o=>(t.clear(),s(()=>o))))}))};h(r,{providers:[y(H),g(C([S]))]});
