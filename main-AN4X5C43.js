import{a as S}from"./chunk-E5X5VHSS.js";import"./chunk-RFWIYMET.js";import{v as y,x as M}from"./chunk-S4F7XZOH.js";import{a as u,b,f as v}from"./chunk-XCJNUEV6.js";import{x as l,y as g,z as C}from"./chunk-CPVSVIW5.js";import{$ as i,D as m,Q as d,Ra as f,jb as h,p as a}from"./chunk-QQISNQ6W.js";var r=class e{title="craft-connect";static \u0275fac=function(o){return new(o||e)};static \u0275cmp=f({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(o,c){o&1&&h(0,"router-outlet")},dependencies:[b],encapsulation:2})};var R=[{path:"",pathMatch:"full",loadComponent:()=>import("./chunk-YZCRJJ2A.js").then(e=>e.HomeComponent)},{path:"become-artisan",loadComponent:()=>import("./chunk-TAHWBJBD.js").then(e=>e.RegisterComponent)},{path:"login",loadComponent:()=>import("./chunk-SRL2NWEV.js").then(e=>e.LoginComponent)},{path:"about",loadComponent:()=>import("./chunk-6LD35O55.js").then(e=>e.AboutComponent)},{path:"user-dashboard",component:S,children:[{path:"",loadComponent:()=>import("./chunk-MSY5AJG4.js").then(e=>e.UserDashboardComponent)},{path:"profile",loadComponent:()=>import("./chunk-HH76SSV2.js").then(e=>e.ProfileComponent)},{path:"bids",loadComponent:()=>import("./chunk-PSPZBSCJ.js").then(e=>e.BidsComponent)},{path:"jobs",loadComponent:()=>import("./chunk-3NZO4LNC.js").then(e=>e.JobsComponent)},{path:"post-jobs",loadComponent:()=>import("./chunk-XNRFCBOB.js").then(e=>e.PostJobComponent)}]},{path:"**",redirectTo:""}];var H=(e,n)=>{let o=i(M),c=i(l),p=o.getAccessToken(),T=y.baseUrl,k=e;if(p&&!o.isTokenExpired(p)){let s=e.clone({setHeaders:{Authorization:`Bearer ${p}`}})}return n(k).pipe(m(s=>{if(s.status!==401||!o.getRefreshToken())return a(()=>s);let N=o.getRefreshToken();return c.post(`${T}/auth/refresh-token`,{refreshToken:N}).pipe(d(t=>{o.setTokens(t.accessToken,t.refreshToken);let A=e.clone({setHeaders:{Authorization:`Bearer ${t.accessToken}`}});return n(A)}),m(t=>(o.clear(),a(()=>t))))}))};u(r,{providers:[v(R),g(C([H]))]});
